# payouter

![banner](src/main/resources/banner.png)

### Формат отчета для вывода нерезидентам

Пока договорились на том, что суммы на вывод будем выгружать в виде CSV-отчета, в котором перечислены поля, которых хватит финансистам для формирования платежки в клиент-банке. Одна строка — один вывод.

Всякие разделители/запятые/точки в суммах/кодировки могут еще 10 раз поменяться из-за Excel, в котором будут этот отчет открывать, но основные поля такие:
```
Id участника;Id магазина;Id вывода;Сумма списания;Комиссия за вывод;Сумма получения;Валюта;Курс;Наименование юридического лица;Адрес юридического лица;Регистрационный номер;Счет получателя;SWIFT банка получателя;Название банка получателя;Адрес банка получателя;Национальный код банка;Номер договора; Дата договора;Назначение платежа
d6f1c81f-7600-4aae-aa59-5a79fe634a3d;3ad07fb1-56e4-47c3-8c7d-a9521b7ce70e;2108144284;1000.00;20.00;980.00;USD;;Aclon International Inc;16 Spinnaker Way unit 17, Concord ON L4K 2N8, Canada;;731181110762004;TDOMCATTTOR;TORONTO-DOMINION BANK;55 King Street West, 2nd Fl TD Ctr, Toronto, Canada;;8016359/07;03.11.2014;Agr 8016359/07 03.11.2014, 2108144284 for accepted payments.
```

Поле        | Описание           | M/O|
--- | --- | ---|
Id участника| Party Id|M
Id магазина| Shop Id|M
Id вывода| Id выплаты у нас|M
Сумма списания| На сколько по сути уменьшается баланс к выводу|M
Комиссия за вывод| Сколько берем за вывод|M
Сумма получения| Сколько придет на счет мерчанту|M
Валюта| атюлаВ|M
Курс| Если вывод не в валюте счета, то будет конвертация. Если вывод в валюте счета, то заполнять не нужно.|O
Наименование юридического лица| Полное наименование юридического лица|M
Адрес юридического лица| Полный адрес (даже со страной)|M
Регистрационный номер| У некоторых мерчантов встречается. Если есть, то заполняем.|O
Счет получателя| Счет мерчанта|M
SWIFT банка получателя| Сабж|M
Название банка получателя| Полное название банка|M
Адрес банка получателя| Полный адрес (даже со страной)|M
Национальный код банка| У некоторых банков встречается. Если есть, то заполняем.|O
Номер договора| Номер нашего договора с мерчантом|M
Дата договора| Дата нашего договора с мерчантом|M
Назначение платежа| Например, **Agr 8016359/07 03.11.2014, 2108144284 for accepted payments.**|M
